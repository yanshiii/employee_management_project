{% extends 'master.html' %}
{% block title %}
  CRRI - List of all Members
{% endblock %}

{% block content %}
<p><a href="/members">DISPLAY ALL DETAILS</a> </p>
  <h1>Members</h1>
  <button onclick="printPage()">PRINT MEMBERS LIST</button>
  
  <div class="table-container" id="content"> 
    <table class="table table-striped table-hover">
      <tr>
        <th>Name</th>
        <th>ID</th>
        <th>Intercom Office</th>
        <th>Intercom Residence</th>
        <th>Mobile Number</th>
        <th>Division</th>
        <th>Designation</th>
        <th>Email</th>
      </tr>
  
      {% for mymember in mymembers %}
        <tr>
          <td style="background-color: rgba(0, 64, 128, 0.8);"><a href="/members/details/{{ mymember.name }}">{{ mymember.name }}</a></td>
          <td style="background-color: rgba(0, 64, 128, 0.8);">{{ mymember.employee_id }}</td>
          <td style="background-color: rgba(0, 64, 128, 0.8);">{{ mymember.intercom_off|default:"-" }}</td>
          <td style="background-color: rgba(0, 64, 128, 0.8);">{{ mymember.intercom_res|default:"-" }}</td>
          <td style="background-color: rgba(0, 64, 128, 0.8);">{{ mymember.phone_number }}</td>
          <td style="background-color: rgba(0, 64, 128, 0.8);">{{ mymember.department }}</td>
          <td style="background-color: rgba(0, 64, 128, 0.8);">{{ mymember.designation }}</td>
          <td style="background-color: rgba(0, 64, 128, 0.8);">{{ mymember.email }}</td>
        </tr>
      {% endfor %}
    </table>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
  
  <script>
    function printPage() {
      const content = document.getElementById('content').innerHTML;
      const printWindow = window.open('', '', 'height=600,width=800');
      printWindow.document.write('<html><head><title>ALL MEMBERS LIST</title>');
      printWindow.document.write('</head><body >');
      printWindow.document.write(content);
      printWindow.document.write('</body></html>');
      printWindow.document.close();
      printWindow.print();
  }

  </script>
{% endblock %}



